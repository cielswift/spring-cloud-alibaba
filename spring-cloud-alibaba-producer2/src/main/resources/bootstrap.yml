server:
  port: 5011
  servlet:
    context-path: /producer20
spring:
  application:
    name: producer20
  aop:
    proxy-target-class: true #使用cglib代理
  main:
    allow-bean-definition-overriding: true #bean冲突覆盖
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://127.0.0.1:1600/spring_alibaba?seUnicode=true&characterEncoding=UTF-8&useSSL=false&serverTimezone=Asia/Shanghai
    username: root
    password: ciel
    type: com.alibaba.druid.pool.DruidDataSource
    druid:
      initial-size: 15
      min-idle: 15
      max-active: 50
      timeBetweenEvictionRunsMillis: 50000
      validationQuery: SELECT 1 FROM dual
  cloud:
    nacos:  #使用nacos注册中心
      discovery:
        server-addr: 127.0.0.1:13100,127.0.0.1:13101,127.0.0.1:13102
        namespace: a998603d-3546-4ddc-9099-2ed82a6f3a68 #开发环境
        group: DEFAULT_GROUP #组
      config:
        server-addr: 127.0.0.1:13100,127.0.0.1:13101,127.0.0.1:13102
        file-extension: yaml  #指定读取的配置文件后缀, dataId 默认就是spring.application.name + yaml, 可以通过prefix修改
        namespace: a998603d-3546-4ddc-9099-2ed82a6f3a68 #开发环境
        group: DEFAULT_GROUP #组
        prefix: producer #文件名 -- 如果没有配置则默认为 ${spring.appliction.name} (优先级高)
        extension-configs:  #扩展配置,多个配置文件
          - dataId: xiapeixin.yaml
            group: DEFAULT_GROUP
            refresh: false
          - dataId: xiapeixin2.yaml
            group: DEFAULT_GROUP
            refresh: false

  zipkin:  #链路追踪
    base-url: http://127.0.0.1:9411/
  sleuth:
    sampler:
      probability: 1 #percentage是采样比例

dubbo: #dubbo配置
  scan:
    base-packages: com.ciel.springcloudalibabaproducer2.serverimpl #服务扫描包,标记有@service
  protocol:
    name: dubbo #dubbo协议
    port: 20882 #协议端口
  provider:
    version: 1.0
  registry:
    address: nacos://127.0.0.1:13100?backup=127.0.0.1:13101,127.0.0.1:13102 #使用nacos注册中心
  application:
    qos-enable: false #运维服务是否开启
  consumer:
    check: false #启动时就检查服务
    version: 1.0


mybatis-plus:
  mapper-locations: classpath:mapper/*Mapper.xml
  typeAliasesPackage: com.ciel.springcloudalibabaentity  #实体扫描
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl #打印sql
    map-underscore-to-camel-case: true #数据库下划线转换
  global-config:
    db-config:
      logic-delete-value: 1 # 逻辑已删除值(默认为 1)
      logic-not-delete-value: 0 # 逻辑未删除值(默认为 0)
      updateStrategy: NOT_NULL  #为null 不更新
      insertStrategy: NOT_NULL
      selectStrategy: NOT_NULL


ribbon:
  ReadTimeout: 5000
  ConnectTimeout: 5000

feign:
  hystrix:
    enabled: true

#禁止超时时间
hystrix:
  command:
    default:
      execution:
        timeout:
          enable: false

management:
  endpoints:
    web:
      exposure:
        include: '*'

logging:
  config: classpath:logback-spring.xml
